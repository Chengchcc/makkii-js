# `@makkii/app-btc`

> TODO: description

## install

```bash
npm install @makkii/app-btc
```

## Usage

```js
import {BtcApiClient, BtcKeystoreClient} from '@makkii/app-btc'
const isTestNet = false;
// btc
const apiClient = new BtcApiClient(isTestNet, 'btc');
const keystoreClient = new BtcKeystoreClient(isTestNet, 'btc');
/*
    // or ltc
    const apiClient = new BtcApiClient(isTestNet, 'ltc');
    const keystoreClient = new BtcKeystoreClient(isTestNet, 'ltc');
*/
// API
const getBalance = aysnc (address) => {
    const balance = await apiClient.getBalance(address);
    return balance;
}
// 
```

if you want to learn more, please see [api-client guide](../../docs/api-client.md) and [keysote-client guide](../../docs/keysotre-client.md).

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [BtcKeystoreClient](#btckeystoreclient)
    -   [Parameters](#parameters)
    -   [ledgerSupport](#ledgersupport)
    -   [getCurrentNetwork](#getcurrentnetwork)
    -   [checkLedgerSupport](#checkledgersupport)
    -   [signTransaction](#signtransaction)
        -   [Parameters](#parameters-1)
    -   [generateMnemonic](#generatemnemonic)
    -   [recoverKeyPairByPrivateKey](#recoverkeypairbyprivatekey)
        -   [Parameters](#parameters-2)
    -   [recoverKeyPairByWIF](#recoverkeypairbywif)
        -   [Parameters](#parameters-3)
    -   [validatePrivateKey](#validateprivatekey)
        -   [Parameters](#parameters-4)
    -   [validateAddress](#validateaddress)
        -   [Parameters](#parameters-5)
    -   [getAccountFromMnemonic](#getaccountfrommnemonic)
        -   [Parameters](#parameters-6)
    -   [getAccountFromHardware](#getaccountfromhardware)
        -   [Parameters](#parameters-7)
-   [IBtcConfig](#ibtcconfig)
    -   [insight_api](#insight_api)
    -   [broadcast](#broadcast)
    -   [explorer](#explorer)
-   [BtcApiClient](#btcapiclient)
    -   [Parameters](#parameters-8)
    -   [config](#config)
    -   [getNetwork](#getnetwork)
    -   [updateConfiguration](#updateconfiguration)
        -   [Parameters](#parameters-9)
    -   [getBlockByNumber](#getblockbynumber)
        -   [Parameters](#parameters-10)
    -   [getBlockNumber](#getblocknumber)
    -   [getTransactionStatus](#gettransactionstatus)
        -   [Parameters](#parameters-11)
    -   [getTransactionExplorerUrl](#gettransactionexplorerurl)
        -   [Parameters](#parameters-12)
    -   [getBalance](#getbalance)
        -   [Parameters](#parameters-13)
    -   [getTransactionsByAddress](#gettransactionsbyaddress)
        -   [Parameters](#parameters-14)
    -   [sendTransaction](#sendtransaction)
        -   [Parameters](#parameters-15)
    -   [sameAddress](#sameaddress)
        -   [Parameters](#parameters-16)
    -   [sendAll](#sendall)
        -   [Parameters](#parameters-17)
    -   [buildTransaction](#buildtransaction)
        -   [Parameters](#parameters-18)

### BtcKeystoreClient

#### Parameters

-   `network` **(`"BTC"` \| `"BTCTEST"` \| `"LTC"` \| `"LTCTEST"`)** 

#### ledgerSupport

only btc btcTest support ledger

#### getCurrentNetwork

Get current network

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** network

#### checkLedgerSupport

Check ledger support

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** if support ledger

#### signTransaction

Sign transaction by signer

##### Parameters

-   `tx` **BtcUnsignedTx** 
-   `signer` **IkeystoreSigner** localSigner or hardware
-   `signerParam` **any** localSigner: {private_key, compressed} hardware:{derivationIndex}
-   `unsignedTx`  unsigned transaction build by buildTransaction

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** encoded transaction

#### generateMnemonic

Generate mnemonic by bip39

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 12 length of mnemonic

#### recoverKeyPairByPrivateKey

Recover key pair by private key

##### Parameters

-   `priKey` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `options` **any?** **compressed** _boolean_ whether to compress public key

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;BtcKeypair>** 

#### recoverKeyPairByWIF

Recover key pair by wif

##### Parameters

-   `WIF` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `wif`  wif string

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;BtcKeypair>** 

#### validatePrivateKey

Validate private key

not implemented

##### Parameters

-   `privateKey` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** 

#### validateAddress

Validate address

##### Parameters

-   `address` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

#### getAccountFromMnemonic

Get account from mnemonic

##### Parameters

-   `address_index` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** bip39 path index
-   `mnemonic` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;BtcKeypair>** 

#### getAccountFromHardware

Get account from hardware

##### Parameters

-   `index` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** derivation index
-   `hardware` **IHardware** 

### IBtcConfig

#### insight_api

bitcoin reset api: <https://github.com/bitpay/insight-api/tree/v0.4.3>

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### broadcast

bitcoin broadcasst tx api

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### explorer

bitcoin explorer url to show tx detail

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### BtcApiClient

BTC api client that implement IsingleApiClient

#### Parameters

-   `config` **[IBtcConfig](#ibtcconfig)** 

#### config

Config  of btc api client

Type: [IBtcConfig](#ibtcconfig)

#### getNetwork

Get network of btc api client

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** network

#### updateConfiguration

Update configuration of btc api client

##### Parameters

-   `config` **[IBtcConfig](#ibtcconfig)** 

#### getBlockByNumber

Get block by number

not implemented

##### Parameters

-   `blockNumber` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### getBlockNumber

Get current Block height

not implemented

#### getTransactionStatus

Get transaction status by tx id

##### Parameters

-   `hash` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** transaction id

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;BtcTxStatus>** transaction status

#### getTransactionExplorerUrl

Get an explorer url showing transaction details

##### Parameters

-   `hash` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** url

#### getBalance

Get an account's balance

##### Parameters

-   `address` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;BigNumber>** balance

#### getTransactionsByAddress

Get transactions by address

##### Parameters

-   `address` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `page` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 
-   `size` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Map](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), BtcTransaction>>** 

#### sendTransaction

Send transaction

##### Parameters

-   `unsignedTx` **BtcUnsignedTx** unsigned transaction build by buildTransaction
-   `signer` **IkeystoreSigner** localSigner or hardware
-   `signerParams` **any**     localSigner: {private_key, compressed} hardware:{derivationIndex}

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;BtcPendingTransaction>** 

#### sameAddress

check if two address is same

##### Parameters

-   `address1` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `address2` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

#### sendAll

try to estimate send one address all balance

##### Parameters

-   `address` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `byte_fee` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>** one address all balance after minus fee

#### buildTransaction

Build transaction

##### Parameters

-   `from` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `to` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `value` **BigNumber** 
-   `options` **{byte_fee: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)}** 

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;BtcUnsignedTx>** 
