# `@makkii/app-eth`

> TODO: description

## install

```bash
npm install @makkii/app-eth
```

## Usage

```js
import {EthApiClient, EthKeystoreClient} from '@makkii/app-eth'
const isTestNet = false;
const apiClient = new EthApiClient(isTestNet);
const keystoreClient = new EthKeystoreClient();
// API
const getBalance = aysnc (address) => {
    const balance = await apiClient.getBalance(address);
    return balance;
}
// 
```

if you want to learn more, please see [api-client guide](../../docs/api-client.md) and [keysote-client guide](../../docs/keysotre-client.md).

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [provider](#provider)
-   [url](#url)
-   [key](#key)
-   [provider](#provider-1)
-   [url](#url-1)
-   [IEthConfig](#iethconfig)
    -   [explorer_api](#explorer_api)
    -   [remote_api](#remote_api)
-   [EthKeystoreClient](#ethkeystoreclient)
    -   [validatePrivateKey](#validateprivatekey)
        -   [Parameters](#parameters)
    -   [getAccountFromMnemonic](#getaccountfrommnemonic)
        -   [Parameters](#parameters-1)
-   [EthApiClient](#ethapiclient)
    -   [Parameters](#parameters-2)
    -   [getNetwork](#getnetwork)
    -   [getBlockByNumber](#getblockbynumber)
        -   [Parameters](#parameters-3)
    -   [getBlockNumber](#getblocknumber)
    -   [getTransactionStatus](#gettransactionstatus)
        -   [Parameters](#parameters-4)
    -   [getTransactionsByAddress](#gettransactionsbyaddress)
        -   [Parameters](#parameters-5)
    -   [sendTransaction](#sendtransaction)
        -   [Parameters](#parameters-6)
    -   [getTopTokens](#gettoptokens)
        -   [Parameters](#parameters-7)

### provider

api provider. currently supported values are: 'etherscan' and 'ethplorer'

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### url

api base url

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### key

api access key

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### provider

explorer url provider. currently supported values are: 'etherscan' and 'ethplorer'

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### url

explorer base url

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### IEthConfig

Ethereum configuration interface

#### explorer_api

api endpoint that used to query transaction information

Type: {provider: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), url: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), key: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)}

#### remote_api

app server endpoint that provides token, icons, etc.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### EthKeystoreClient

Ethereum keystore client that implements IsingleKeystoreClient

#### validatePrivateKey

throws not implemented error

##### Parameters

-   `privateKey` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** 

#### getAccountFromMnemonic

Get account from mnemonic

##### Parameters

-   `address_index` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** index in hd wallet
-   `mnemonic` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** mnemonic phrase

Returns **any** account object: { private_key: '', public_key: '', address: '', index: '' }

### EthApiClient

Ethereum api client that implements IsingleApiFullClient

#### Parameters

-   `config` **[IEthConfig](#iethconfig)** 

#### getNetwork

Get network name: mainnet, amity.

#### getBlockByNumber

Get block by number, block information doesn't contains transaction details

##### Parameters

-   `blockNumber` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** block number's hex string

Returns **any** eth_getBlockNumber response's result

#### getBlockNumber

Get latest block number

Returns **any** eth_getBlockNumber response's result

#### getTransactionStatus

Get transaction status.

##### Parameters

-   `hash` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** transaction hash

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;any>**     if eth_getTransactionReceipt is null, returns null;
    else return object { status: true/false, blockNumber: intger, gasUsed: integer }

#### getTransactionsByAddress

Get transactions by the given address

##### Parameters

-   `address` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** account address
-   `page` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** page number
-   `size` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** page size
-   `timestamp` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** earlier than this timestamp

Returns **any** array of object structure which contains:<br>-   **hash**: string, with prefix 0x
-   **timestamp**: milli-seconds from 1970
-   **from**: sender
-   **to**: receiver
-   **value**: transfer amount
-   **status**: 'CONFIRMED' or 'FAILED'
-   **blockNumber**: hex string
-   **fee**: integer

#### sendTransaction

Send transaction

##### Parameters

-   `unsignedTx` **EthUnsignedTx** unsigned transaction build by buildTransaction
-   `signer` **IkeystoreSigner** localSigner or hardware
-   `signerParams` **any**     localSigner: {private_key} hardware:{derivationIndex}

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;EthPendingTx>** 

#### getTopTokens

Get top tokens

##### Parameters

-   `topN` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** default 20

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;Token>>** 
